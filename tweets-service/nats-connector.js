// Generated by LiveScript 1.5.0
(function(){
  var NATS, NatsConnector;
  NATS = require('nats');
  NatsConnector = (function(){
    NatsConnector.displayName = 'NatsConnector';
    var prototype = NatsConnector.prototype, constructor = NatsConnector;
    NatsConnector.prototype.constructor = function(){
      this.nats = NATS.connect("nats://" + process.env.NATS_IO_HOST + ":" + process.env.NATS_IO_PORT);
      return console.log("connected to nats");
    };
    NatsConnector.prototype.subscribeMapping = function(messageCallbackMapping){
      var this$ = this;
      return List.each(function(arg$){
        var name, callback;
        name = arg$[0], callback = arg$[1];
        return this$.nats.subscribe(name, function(request, replyTo){
          return callbak(request.payload, {
            reply: function(payload){
              return this$.nats.publish(replyTo, payload);
            }
          });
        });
      })(
      objToPairs(
      methods));
    };
    NatsConnector.prototype.send = function(name, data, callback){
      return this.nats.requestOne(name, data, function(response){
        return callback(response.payload);
      });
    };
    function NatsConnector(){}
    return NatsConnector;
  }());
  module.exports = NatsConnector;
}).call(this);
